<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="description" content="A statically generated blog example using Next.js and Markdown."/><meta property="og:image" content="https://og-image.vercel.app/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><title>Como hospedar um site nextjs no github pages | Next.js Blog Example with Markdown</title><meta name="next-head-count" content="15"/><link rel="preload" href="/blog/_next/static/css/86888c8c146dcfe8.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/86888c8c146dcfe8.css" data-n-g=""/><link rel="preload" href="/blog/_next/static/css/cf121497002c184d.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/cf121497002c184d.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/blog/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/blog/_next/static/chunks/webpack-4d5208940e01a3dc.js" defer=""></script><script src="/blog/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/blog/_next/static/chunks/main-c8f3a37e18433dd2.js" defer=""></script><script src="/blog/_next/static/chunks/pages/_app-0cac732de45017bf.js" defer=""></script><script src="/blog/_next/static/chunks/1a48c3c1-d0e34d37f0e89a1d.js" defer=""></script><script src="/blog/_next/static/chunks/739-e999928cf7a94f22.js" defer=""></script><script src="/blog/_next/static/chunks/pages/posts/%5Bslug%5D-85b202d74a8539c4.js" defer=""></script><script src="/blog/_next/static/OHIuaCPc4M603tw7B7ItH/_buildManifest.js" defer=""></script><script src="/blog/_next/static/OHIuaCPc4M603tw7B7ItH/_ssgManifest.js" defer=""></script></head><body><div id="__next"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&false)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}else{c.add('dark')}if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'dark'}catch(e){}}()</script><div class="min-h-screen"><div class="p-3 fixed right-0 top-0"></div><main><div class="container mx-auto px-5"><h2 class="text-2xl md:text-4xl font-bold tracking-tight md:tracking-tighter leading-tight mb-20 mt-8"><a class="hover:underline" href="/blog">Blog</a>.</h2><article class="mb-32"><h1 class="text-5xl md:text-7xl lg:text-8xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center md:text-left">Como hospedar um site nextjs no github pages</h1><div class="hidden md:block md:mb-12"><div class="flex items-center"><img src="/blog/assets/blog/authors/lucas.png" class="w-12 h-12 rounded-full mr-4" alt="Lucas Almeida"/><div class="text-xl font-bold">Lucas Almeida</div></div></div><div class="mb-8 md:mb-16 sm:mx-0"></div><div class="max-w-2xl mx-auto"><div class="block md:hidden mb-6"><div class="flex items-center"><img src="/blog/assets/blog/authors/lucas.png" class="w-12 h-12 rounded-full mr-4" alt="Lucas Almeida"/><div class="text-xl font-bold">Lucas Almeida</div></div></div><div class="mb-6 text-lg"><time dateTime="2021-08-01T05:35:07.322Z">August	1, 2021</time></div></div><div class="max-w-2xl mx-auto"><div class="markdown-styles_markdown__h_8de"><h2>Introdu√ß√£o</h2>
<p>A id√©ia √© clonar um exemplo de reposit√≥rio oficial que j√° cont√©m um <a href="https://github.com/vercel/next.js/tree/canary/examples/blog-starter">blog markdown do nextjs</a></p>
<p>clona-lo localmente, mudar o que quiser e configura-lo para gerar um site est√°tico a ser hospedado pelo github pages.</p>
<h2>Criar um novo projeto Blog Nextjs</h2>
<p>Clone o seguinte reposit√≥rio:
<a href="https://github.com/vercel/next.js/tree/canary/examples/blog-starter">https://github.com/vercel/next.js/tree/canary/examples/blog-starter</a></p>
<p>ou rode algum dos comandos abaixo para criar um diret√≥rio local com o conte√∫do do reposit√≥rio citado.</p>
<p>n√£o se esque√ßa de trocar o texto ¬®blog-starter-app¬® pelo nome do diret√≥rio do projeto.</p>
<pre><code>npx create-next-app --example blog-starter blog-starter-app
</code></pre>
<pre><code>yarn create next-app --example blog-starter blog-starter-app
</code></pre>
<pre><code>pnpm create next-app --example blog-starter blog-starter-app
</code></pre>
<h2>Analizando o projeto</h2>
<p>Cada arquivo markdown dentro da pasta /_posts √© compilado como um post do blog. Dados como t√≠tulo, thumbnail, author, entre outros, tamb√©m s√£o declarados no arquivo com extens√£o .md</p>
<p>entre na pasta do projeto pelo terminal e rode os comandos de start,</p>
<pre><code>npm install
npm run dev
</code></pre>
<pre><code>yarn
yarn dev
</code></pre>
<p>Isso iniciar√° um servidor nextjs e retornar√° um link provavelmente http://localhost:3000 pelo terminal.</p>
<p>Acesse o link e veja seu blog pelo navegador.</p>
<p><a href="https://nextjs.org/docs">navegue na documenta√ß√£o do nextjs</a> para aprender a modifica-lo como quiser.</p>
<h2>Como gerar p√°ginas est√°ticas com nextjs</h2>
<p>Para gerar p√°ginas est√°ticas com next √© necess√°rio rodar o comando <a href="https://nextjs.org/docs/advanced-features/static-html-export">next export</a>, para isso vamos editar nosso arquivo <strong>package.json</strong> para acrescentar o comando export ao build.</p>
<p>acrescente ¬® &#x26;&#x26; next export¬® √† linha ¬®build¬® como no exemplo abaixo.</p>
<pre><code>"scripts": {
    "dev": "next",
    "build": "next build &#x26;&#x26; next export",
    "start": "next start",
    "typecheck": "tsc"
  }
</code></pre>
<p>agora ao rodar o comando build uma pasta ./out ser√° criada, com arquivos est√°ticos que servem seu blog, isso √© √∫til para ser rodado como uma action do github.</p>
<h2>Como configurar o github actions para servir um site nextjs est√°tico.</h2>
<p>Com o github actions √© poss√≠vel automatizar a compila√ß√£o com a utiliza√ß√£o de  diversos comandos, inclusive node, dispon√≠veis para serem executados direto de um reposit√≥rio no github.</p>
<p>Usaremos o Github Actions para em cada push gerar as p√°ginas est√°ticas e coloca-las em uma nova branch pronta para seren servidas.</p>
<p>crie um arquivo node.js.yml no diret√≥rio ./.github/workflows/</p>
<pre><code>touch ./.github/workflows/node.js.yml
</code></pre>
<p>cole o seguinte c√≥digo no arquivo node.js.yml</p>
<pre><code>name: Node.js CI

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v1
      with:
        node-version: 12
    - run: npm install -g yarn
    - run: yarn install --frozen-lockfile
    - run: yarn build
    - run: touch ./out/.nojekyll

    - name: Deploy üöÄ
      uses: JamesIves/github-pages-deploy-action@v4
      with:
        folder: out
</code></pre>
<p>Acesse a <a href="https://docs.github.com/pt/actions/learn-github-actions/understanding-github-actions">documenta√ß√£o  do github actions</a> para obter mais informa√µes.</p>
<p>agora seus pr√≥ximos commits rodar√£o o build configurado acima.</p>
<h2>Como configurar basePath e assetPrefix do next.config.js para github pages</h2>
<p>Para que as rotas, arquivos e imagens funcionem bem no github pages √© necess√°rio ativar as op√ß√µes basePath e assetPrefix no seu arquivo next.config.js.</p>
<p>caso ele n√£o exista na raiz do projeto crie-o. com o comando</p>
<pre><code>touch next.config.js 
</code></pre>
<p>Insira o seguite c√≥digo em next.config.js substitua /blog pelo nome do seu reposit√≥rio.</p>
<pre><code>/**
 * @type {import('next').NextConfig}
 */
const nextConfig = {
    basePath: "/blog",
    assetPrefix: "/blog"
}
module.exports = nextConfig
</code></pre>
<p>Tamb√©m √© poss√≠vel passar o nome do seu reposit√≥rio via vari√°vel de ambiente.</p>
<h2>Problema com imagens</h2>
<p>As imagens tamb√©m precisam do nome do diret√≥rio como prefixo para funcionarem, a unica solu√ß√£o que achei pra isso √© inserindo como stringo ou como vari√°vel de ambiente manualmente nas tags  do projeto.</p>
<p>Neste projeto apenas os componentes /components/avatar.tsx e /components/cover-image.tsx usam a tag </p>
<p>a altera√ß√£o √© apenas inserir a string com o nome do reposit√∂rio no in√≠cio do atributo src, como o nome do meu reposit√≥rio √© blog, no meu caso fica assim:</p>
<pre><code>&#x3C;img src={"/blog" + picture} />
</code></pre>
<h2>Conclus√£o</h2>
<p>Agora temos um blog hospedado pronto para uso.
<a href="https://lucasalmeida-ux.github.io/blog/">Projeto hospedaddo no github pages</a></p>
<p>Agora s√≥ falta dar aquela personalizada com tailwindcss mas isso fica para o pr√≥ximo post.</p>
</div></div></article></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Como hospedar um site nextjs no github pages","date":"2021-08-01T05:35:07.322Z","slug":"como-hospedar-um-blog-nextjs-no-github-pages","author":{"name":"Lucas Almeida","picture":"/assets/blog/authors/lucas.png"},"content":"\u003ch2\u003eIntrodu√ß√£o\u003c/h2\u003e\n\u003cp\u003eA id√©ia √© clonar um exemplo de reposit√≥rio oficial que j√° cont√©m um \u003ca href=\"https://github.com/vercel/next.js/tree/canary/examples/blog-starter\"\u003eblog markdown do nextjs\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eclona-lo localmente, mudar o que quiser e configura-lo para gerar um site est√°tico a ser hospedado pelo github pages.\u003c/p\u003e\n\u003ch2\u003eCriar um novo projeto Blog Nextjs\u003c/h2\u003e\n\u003cp\u003eClone o seguinte reposit√≥rio:\n\u003ca href=\"https://github.com/vercel/next.js/tree/canary/examples/blog-starter\"\u003ehttps://github.com/vercel/next.js/tree/canary/examples/blog-starter\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eou rode algum dos comandos abaixo para criar um diret√≥rio local com o conte√∫do do reposit√≥rio citado.\u003c/p\u003e\n\u003cp\u003en√£o se esque√ßa de trocar o texto ¬®blog-starter-app¬® pelo nome do diret√≥rio do projeto.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003enpx create-next-app --example blog-starter blog-starter-app\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode\u003eyarn create next-app --example blog-starter blog-starter-app\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode\u003epnpm create next-app --example blog-starter blog-starter-app\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eAnalizando o projeto\u003c/h2\u003e\n\u003cp\u003eCada arquivo markdown dentro da pasta /_posts √© compilado como um post do blog. Dados como t√≠tulo, thumbnail, author, entre outros, tamb√©m s√£o declarados no arquivo com extens√£o .md\u003c/p\u003e\n\u003cp\u003eentre na pasta do projeto pelo terminal e rode os comandos de start,\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003enpm install\nnpm run dev\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode\u003eyarn\nyarn dev\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIsso iniciar√° um servidor nextjs e retornar√° um link provavelmente http://localhost:3000 pelo terminal.\u003c/p\u003e\n\u003cp\u003eAcesse o link e veja seu blog pelo navegador.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://nextjs.org/docs\"\u003enavegue na documenta√ß√£o do nextjs\u003c/a\u003e para aprender a modifica-lo como quiser.\u003c/p\u003e\n\u003ch2\u003eComo gerar p√°ginas est√°ticas com nextjs\u003c/h2\u003e\n\u003cp\u003ePara gerar p√°ginas est√°ticas com next √© necess√°rio rodar o comando \u003ca href=\"https://nextjs.org/docs/advanced-features/static-html-export\"\u003enext export\u003c/a\u003e, para isso vamos editar nosso arquivo \u003cstrong\u003epackage.json\u003c/strong\u003e para acrescentar o comando export ao build.\u003c/p\u003e\n\u003cp\u003eacrescente ¬® \u0026#x26;\u0026#x26; next export¬® √† linha ¬®build¬® como no exemplo abaixo.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\"scripts\": {\n    \"dev\": \"next\",\n    \"build\": \"next build \u0026#x26;\u0026#x26; next export\",\n    \"start\": \"next start\",\n    \"typecheck\": \"tsc\"\n  }\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eagora ao rodar o comando build uma pasta ./out ser√° criada, com arquivos est√°ticos que servem seu blog, isso √© √∫til para ser rodado como uma action do github.\u003c/p\u003e\n\u003ch2\u003eComo configurar o github actions para servir um site nextjs est√°tico.\u003c/h2\u003e\n\u003cp\u003eCom o github actions √© poss√≠vel automatizar a compila√ß√£o com a utiliza√ß√£o de  diversos comandos, inclusive node, dispon√≠veis para serem executados direto de um reposit√≥rio no github.\u003c/p\u003e\n\u003cp\u003eUsaremos o Github Actions para em cada push gerar as p√°ginas est√°ticas e coloca-las em uma nova branch pronta para seren servidas.\u003c/p\u003e\n\u003cp\u003ecrie um arquivo node.js.yml no diret√≥rio ./.github/workflows/\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003etouch ./.github/workflows/node.js.yml\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ecole o seguinte c√≥digo no arquivo node.js.yml\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003ename: Node.js CI\n\non:\n  push:\n    branches: [ \"main\" ]\n  pull_request:\n    branches: [ \"main\" ]\n\njobs:\n  build:\n\n    runs-on: ubuntu-latest\n\n    steps:\n    - uses: actions/checkout@v1\n      with:\n        node-version: 12\n    - run: npm install -g yarn\n    - run: yarn install --frozen-lockfile\n    - run: yarn build\n    - run: touch ./out/.nojekyll\n\n    - name: Deploy üöÄ\n      uses: JamesIves/github-pages-deploy-action@v4\n      with:\n        folder: out\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAcesse a \u003ca href=\"https://docs.github.com/pt/actions/learn-github-actions/understanding-github-actions\"\u003edocumenta√ß√£o  do github actions\u003c/a\u003e para obter mais informa√µes.\u003c/p\u003e\n\u003cp\u003eagora seus pr√≥ximos commits rodar√£o o build configurado acima.\u003c/p\u003e\n\u003ch2\u003eComo configurar basePath e assetPrefix do next.config.js para github pages\u003c/h2\u003e\n\u003cp\u003ePara que as rotas, arquivos e imagens funcionem bem no github pages √© necess√°rio ativar as op√ß√µes basePath e assetPrefix no seu arquivo next.config.js.\u003c/p\u003e\n\u003cp\u003ecaso ele n√£o exista na raiz do projeto crie-o. com o comando\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003etouch next.config.js \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eInsira o seguite c√≥digo em next.config.js substitua /blog pelo nome do seu reposit√≥rio.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e/**\n * @type {import('next').NextConfig}\n */\nconst nextConfig = {\n    basePath: \"/blog\",\n    assetPrefix: \"/blog\"\n}\nmodule.exports = nextConfig\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTamb√©m √© poss√≠vel passar o nome do seu reposit√≥rio via vari√°vel de ambiente.\u003c/p\u003e\n\u003ch2\u003eProblema com imagens\u003c/h2\u003e\n\u003cp\u003eAs imagens tamb√©m precisam do nome do diret√≥rio como prefixo para funcionarem, a unica solu√ß√£o que achei pra isso √© inserindo como stringo ou como vari√°vel de ambiente manualmente nas tags  do projeto.\u003c/p\u003e\n\u003cp\u003eNeste projeto apenas os componentes /components/avatar.tsx e /components/cover-image.tsx usam a tag \u003c/p\u003e\n\u003cp\u003ea altera√ß√£o √© apenas inserir a string com o nome do reposit√∂rio no in√≠cio do atributo src, como o nome do meu reposit√≥rio √© blog, no meu caso fica assim:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\u0026#x3C;img src={\"/blog\" + picture} /\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eConclus√£o\u003c/h2\u003e\n\u003cp\u003eAgora temos um blog hospedado pronto para uso.\n\u003ca href=\"https://lucasalmeida-ux.github.io/blog/\"\u003eProjeto hospedaddo no github pages\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eAgora s√≥ falta dar aquela personalizada com tailwindcss mas isso fica para o pr√≥ximo post.\u003c/p\u003e\n"}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"como-hospedar-um-blog-nextjs-no-github-pages"},"buildId":"OHIuaCPc4M603tw7B7ItH","assetPrefix":"/blog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>